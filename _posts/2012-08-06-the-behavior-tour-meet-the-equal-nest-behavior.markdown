---
layout: post
title: ! 'The Behavior Tour: Meet The Equal Nest Behavior'
published: true
---
<p><em>Propel comes with a <a href="http://www.propelorm.org/documentation/#behaviors_reference">large set of behaviors</a>&nbsp;but most of them are already well-known. However, we noticed that a lot of people didn't know about the awesome user contributions we have in the Propel community.&nbsp;</em><em>In this series, we will introduce a new user contributed Propel behavior each week.</em></p>
<p><a href="https://github.com/CraftyShadow">Ivan Tanev</a>&nbsp;wrote a wonderful behavior named&nbsp;<a href="https://github.com/CraftyShadow/EqualNestBehavior">EqualNestBehavior</a>&nbsp;to solve a common problem: <strong>relations between instances of a same class</strong>. The best example is probably a friendship relation between users/persons in your application. In a social networking world, it's a very common feature.<!--more--></p>
<p>The behavior provides all the methods you need to manage those relations: <code>addFriend()</code>, <code>removeFriend()</code>, <code>getFriends()</code>, <code>setFriends()</code>, <code>hasFriend()</code>.&nbsp;See&nbsp;<a href="https://github.com/CraftyShadow/EqualNestBehavior#activerecord-api">the complete list of ActiveRecord's methods</a>&nbsp;for more details.</p>
<p><script src="https://gist.github.com/fd31fb9a18cf21f5f519.js"></script></p>
<p>As usual, the <a href="https://github.com/CraftyShadow/EqualNestBehavior#activequery-api">ActiveQuery API</a> has useful methods, too: you can either find or count friends for a given object.</p>
<p>Under the hood, this behavior defines a new table to store relations. It's like a Many to Many relationship, but with the same table referenced twice. Using this behavior is super easy, just add it to your XML schema as following:</p>
<p><script src="https://gist.github.com/ea38fb87e8f7b7cea8dc.js"></script></p>
<p>The table name,&nbsp;<code>friend</code>, is important. It defines the relationship name, and everything is built around this name.</p>
<p>This behavior is really flexible, and works with Propel 1.6 all versions.&nbsp;It is fully unit tested, and hosted on GitHub: <a href="https://github.com/CraftyShadow/EqualNestBehavior">CraftyShadow/EqualNestBehavior</a>. Thanks for this great behavior Ivan!</p>
